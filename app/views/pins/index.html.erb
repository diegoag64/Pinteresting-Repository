<%= render 'pages/home' unless user_signed_in?%>





<div id="pins" class="transitions-enabled">

  <div class="box panel panel-default">
    <img src="http://etc-mysitemyway.s3.amazonaws.com/icons/legacy-previews/icons-256/high-resolution-dark-blue-denim-jeans-icons-alphanumeric/072408-high-resolution-dark-blue-denim-jeans-icon-alphanumeric-plus-sign-simple.png">
    <div class="panel-body" style="text-align: center;">
      <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
  Add Pin
</button>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Add Pin</h4>
      </div>
      <div class="modal-body">

 <%= simple_form_for(:user, :url => user_session_path) do |f| %>
          <div class="inputs">
             <div class="form-group">
       <%= f.label :email %>
       <%= f.email_field :email, autofocus: true, class: "form-control" %>
    </div>
           <div class="form-group">
      <%= f.label :password %>
        <%= f.password_field :password, class: "form-control", autocomplete: "off" %>
    </div>
            <div class="form-group">
        <%= f.check_box :remember_me %> <%= f.label :remember_me %>
      </div>
          </div>
  </div>
    <div class="modal-footer">
        <%= f.submit "Sign in", class: 'btn btn-primary' %>
        <% end %>
      </div>
    </div>
  </div>
</div>
    </div>
  </div>


   <% @pins.each do |pin| %>
   <div class="box panel panel-default">
        <%= link_to image_tag(pin.image.url(:medium)), pin %>
        <div class="panel-body">
          <%= pin.description %><br/>
          <strong><%= pin.user.name if pin.user %></strong><br/>
          <%= time_ago_in_words(pin.created_at) + ' ago' %>

        </br>
            


              
            <% if user_signed_in? %>
                        <div class="btn-group">
                <button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown">Actions <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
             
              <% if current_user.voted_up_on? pin %>
                <li>
                  <%= link_to dislike_pin_path(pin), method: :put, remote: true, class: 'upvote' do %>
                  <span class="glyphicon glyphicon-thumbs-down"></span> Unlike
                </li>
            <% end %>
            <% else %>
              <li>
              <%= link_to like_pin_path(pin), method: :put, remote: true, class: "white upvote" do %>
              <span class="glyphicon glyphicon-thumbs-up"></span> Like
              <% end %>


            </li>
            <% end %>

            <% if pin.user == current_user %>
              <li>
            <%= link_to edit_pin_path(pin), class: "white" do %>
            <span class="glyphicon glyphicon-edit"></span> Edit
            <% end %>  
            </li>

            <% end %>

                        <% if current_user.try(:admin?) %>
                <li>    
                <%= link_to  pin, method: :delete, data: { confirm: 'Are you sure?' }, class: "white" do %>
                <span class="glyphicon glyphicon-trash"></span> S.Delete
                <% end %>
              </li>
            <% elsif pin.user == current_user %>
            <li>    
                <%= link_to  pin, method: :delete, data: { confirm: 'Are you sure?' }, class: "white" do %>
                <span class="glyphicon glyphicon-trash"></span>Delete
                <% end %>
              </li> 
                <% end %>

</ul>
            </div>
<% end %>
          


           
            <p>              Likes:
              <%= pin.get_likes.size %>

            </p>




            
          
        </div>

    </div>
    <% end %>
</div>
<div class="center">
  <%= will_paginate @posts, renderer: BootstrapPagination::Rails %>
</div>